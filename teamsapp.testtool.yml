# yaml-language-server: $schema=https://aka.ms/teams-toolkit/v1.5/yaml.schema.json
# Workspace-level Test Tool automation for Microsoft 365 Agents Toolkit.
version: v1.5

deploy:
  - uses: devTool/install
    with:
      testTool:
        version: ~0.2.1
        symlinkDir: ./src/teams-app/devTools/teamsapptester

  - uses: cli/runNpmCommand
    with:
      workingDirectory: ./src/teams-app
      args: install --no-audit --workspaces=false

  - uses: file/createOrUpdateEnvironmentFile
    with:
      target: ./src/teams-app/.env
      envs:
        NODE_ENV: local
        PORT: 3978
        BOT_ID: ""
        BOT_PASSWORD: ""
        SECRET_BOT_PASSWORD: ""
        TEAMSFX_NOTIFICATION_STORE_FILENAME: ${{TEAMSFX_NOTIFICATION_STORE_FILENAME}}
